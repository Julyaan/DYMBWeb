<!doctype html>
<html class="no-js fixed-layout">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title><%= title %>|大医慢病研究院</title>
  <meta name="description" content="这是一个 index 页面">
  <meta name="keywords" content="index">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <link rel="icon" type="image/png" href="assets/i/favicon.png">
  <link rel="apple-touch-icon-precomposed" href="assets/i/app-icon72x72@2x.png">
  <meta name="apple-mobile-web-app-title" content="Amaze UI" />
  <link rel="stylesheet" href="assets/css/amazeui.min.css"/>
  <link rel="stylesheet" href="assets/css/admin.css">
</head>
<body ng-app='routingDemoApp' ng-controller='AppController'>
<!--[if lte IE 9]>
<p class="browsehappy">你正在使用<strong>过时</strong>的浏览器，Amaze UI 暂不支持。 请 <a href="http://browsehappy.com/" target="_blank">升级浏览器</a>
  以获得更好的体验！</p>
<![endif]-->

<header class="am-topbar am-topbar-inverse admin-header">
  <div class="am-topbar-brand">
    <strong>大医慢病研究院</strong> <small>网站后台管理</small>
  </div>

  <button class="am-topbar-btn am-topbar-toggle am-btn am-btn-sm am-btn-success am-show-sm-only" data-am-collapse="{target: '#topbar-collapse'}"><span class="am-sr-only">导航切换</span> <span class="am-icon-bars"></span></button>

  <div class="am-collapse am-topbar-collapse" id="topbar-collapse">

    <ul class="am-nav am-nav-pills am-topbar-nav am-topbar-right admin-header-list">
   
      <li class="am-dropdown" data-am-dropdown>
        <a class="am-dropdown-toggle" data-am-dropdown-toggle href="javascript:;">
          <span class="am-icon-users"></span> 管理员<%= username %> <span class="am-icon-caret-down"></span>
        </a>
        <ul class="am-dropdown-content">
          <li><a href="#"><span class="am-icon-user"></span> 资料</a></li>
          <li><a href="/logoutAdm"><span class="am-icon-power-off"></span> 退出</a></li>
        </ul>
      </li>
      <li class="am-hide-sm-only"><a href="javascript:;" id="admin-fullscreen"><span class="am-icon-arrows-alt"></span> <span class="admin-fullText">开启全屏</span></a></li>
    </ul>
  </div>
</header>

<div class="am-cf admin-main">
  <!-- sidebar start -->
  <div class="admin-sidebar am-offcanvas" id="admin-offcanvas">
    <div class="am-offcanvas-bar admin-offcanvas-bar">
      <ul class="am-list admin-sidebar-list">
        <li><a href="#/"><span class="am-icon-home"></span> 首页</a></li>
        <li class="admin-parent">
          <a class="am-cf" data-am-collapse="{target: '#collapse-nav1'}"><span class="am-icon-send"></span> 新闻动态 <span class="am-icon-angle-right am-fr am-margin-right"></span></a>
          <ul class="am-list am-collapse admin-sidebar-sub " id="collapse-nav1">
            <li><a href="#/add_news"><span class="am-icon-send-o"></span> 新建文章</a></li>
            <li><a href="#/view_news"><span class="am-icon-th"></span> 查看文章
				<span ng-hide="count == 0"class="am-badge am-badge-secondary am-margin-right am-fr">{{ $root.count }}</span>
				
			</a></li>
          </ul>
        </li>
		 <li class="admin-parent">
          <a class="am-cf" data-am-collapse="{target: '#collapse-nav2'}"><span class="am-icon-user"></span> 专家信息 <span class="am-icon-angle-right am-fr am-margin-right"></span></a>
          <ul class="am-list am-collapse admin-sidebar-sub " id="collapse-nav2">
            <li><a href="#/add_e"><span class="am-icon-user-plus"></span> 新建</a></li>
            <li><a href="#/view_e"><span class="am-icon-users"></span> 查看</a></li>
          </ul>
        </li>
		<li class="admin-parent">
          <a class="am-cf" data-am-collapse="{target: '#collapse-nav3'}"><span class="am-icon-pencil-square"></span> 慢病研究 <span class="am-icon-angle-right am-fr am-margin-right"></span></a>
          <ul class="am-list am-collapse admin-sidebar-sub " id="collapse-nav3">
            <li><a href="#/add_r"><span class="am-icon-file-o"></span> 新建</a></li>
            <li><a href="#/view_r"><span class="am-icon-file-text-o"></span> 查看</a></li>
          </ul>
        </li>
		<li class="admin-parent">
          <a class="am-cf" data-am-collapse="{target: '#collapse-nav4'}"><span class="am-icon-shield"></span> 研究基地 <span class="am-icon-angle-right am-fr am-margin-right"></span></a>
          <ul class="am-list am-collapse admin-sidebar-sub " id="collapse-nav4">
            <li><a href="#/add_base"><span class="am-icon-cube"></span> 新建</a></li>
            <li><a href="#/view_base"><span class="am-icon-cubes"></span> 查看</a></li>
          </ul>
        </li>
		<li><a href="admin-table.html"><span class="am-icon-pencil-square-o"></span> 留言管理</a></li>
        <li><a href="admin-table.html"><span class="am-icon-table"></span> 其他</a></li>
        <li><a href="/logoutAdm"><span class="am-icon-sign-out"></span> 注销</a></li>
      </ul>

      <div class="am-panel am-panel-default admin-sidebar-panel">
        <div class="am-panel-bd">
          <p><span class="am-icon-bookmark"></span> 公告</p>
          <p>欢迎登陆大医慢病后台管理系统</p>
        </div>
      </div>

    </div>
  </div>
  <!-- sidebar end -->

  <!-- content start -->
  <div class="admin-content">
    <div ng-view class="admin-content-body">
     
    </div>

    <footer class="admin-content-footer">
      <hr>
      <p class="am-padding-left">© gjy.codeplay all rights reserved.</p>
    </footer>
  </div>
  <!-- content end -->

</div>

<a href="#" class="am-icon-btn am-icon-th-list am-show-sm-only admin-menu" data-am-offcanvas="{target: '#admin-offcanvas'}"></a>

<!--[if lt IE 9]>
<script src="http://libs.baidu.com/jquery/1.11.1/jquery.min.js"></script>
<script src="http://cdn.staticfile.org/modernizr/2.8.3/modernizr.js"></script>
<script src="assets/js/amazeui.ie8polyfill.min.js"></script>
<![endif]-->

<!--[if (gte IE 9)|!(IE)]><!-->
<script src="assets/js/jquery.min.js"></script>
<!--<![endif]-->
<script src="assets/js/amazeui.min.js"></script>
<script src="assets/js/app.js"></script>
<script src="http://cdn.static.runoob.com/libs/angular.js/1.4.6/angular.min.js"></script>
<script src="http://apps.bdimg.com/libs/angular-route/1.3.13/angular-route.js"></script>
<script src="http://cdn.bootcss.com/angular-sanitize/1.5.8/angular-sanitize.min.js"></script>
<script>
	angular.module('routingDemoApp',['ngRoute', 'ngSanitize'])
	.controller('AppController',function ($scope,$rootScope,myFactory) 
				{
				$rootScope.count= 0
				})
	.controller('NewsController',function ($scope,$rootScope,myFactory) 
				{
				$scope.sorts ={
					"慢病头条":"慢病头条",
					"政策咨询":"政策咨询",
					"学术论文":"学术论文",
					"慢病咨询":"慢病咨询"
					};
				
				$scope.getData = function(){
					$rootScope.count = $rootScope.count + 1;
					$scope.date = $("#date").val();
					var html = ue.getContent();
					//$scope.content = $("#contenCarrier").html();
					$scope.content = html;
					myFactory.setter($scope.title,$scope.source,$scope.date,$scope.sort,$scope.content);
					console.log("it's:"+$scope.content);
					}
				})
	.controller('NewsViewController',function ($scope,$rootScope,myFactory) 
				{
				var getObj = myFactory.getter();
				$scope.articles = getObj.articles;
				$scope.articleNum = $scope.articles.length;
				$scope.go = function(url){
					console.log("url:"+url);
					//$location.path(url);
					window.location.href =	url;
					}
				})
	.controller('NewsDtlController',function($scope,$routeParams,myFactory)
				{
				var getObj = myFactory.getter();
				var articles = getObj.articles;
				$scope.essay = articles[$routeParams.id];
				$scope.showData = function(){
					console.log("hello:"+$scope.essay);
					
					}
				})
	.controller('NewsEditController',function($scope,$routeParams,myFactory)
				{
				$scope.sorts2 =["慢病头条","政策咨询","学术论文","慢病咨询"];
				var getObj = myFactory.getter();
				var articles = getObj.articles;
				$scope.essay = articles[$routeParams.id];
				$scope.showDatas = function(){
					console.log("hello:"+$scope.essay);
					
					}
				})
	.factory('myFactory', function () {   
		//定义参数对象
		var myObject = {};
		myObject.articles = [];
		var _setter = function (title,source,date,sort,content) {
			var data ={};
			data.title = title;
			data.source = source;
			data.date = date;
			data.sort = sort;
			data.content = content;
		    myObject.articles.push(data);     
		   //console.log(myObject.articles.length);
		};

		var _getter = function () {
			return myObject;
		};

		// Public APIs
		// 在controller中通过调setter()和getter()方法可实现提交或获取参数的功能
		return {
			setter: _setter,
			getter: _getter
		};
	})

	.config(['$routeProvider', function($routeProvider){
		$routeProvider
		.when('/',{templateUrl:'admin_home',controller: 'AppController'})
		.when('/add_news',{
				templateUrl:'admin_add_news',
				controller: 'NewsController'
			})
		.when('/view_news',{
				templateUrl:'admin_view_news',
				controller: 'NewsViewController'
			})
		.when('/news_detail/:id',{
				templateUrl:'news_datail.html',
				controller: 'NewsDtlController'
			})
		.when('/news_edit/:id',{
				templateUrl:'admin_edit_news',
				controller: 'NewsEditController'
			})
		.when('/add_e',{templateUrl:'admin_add_e'})
		.when('/view_e',{template:'04这是查看新专家页面'})
		.when('/add_r',{template:'05这是发布研究动态页面'})
		.when('/view_r',{template:'06这是查看研究动态页面'})
		.when('/add_base',{template:'07这是发布基地页面'})
		.when('/view_base',{template:'08这是查看基地页面'})

		.otherwise({redirectTo:'/'});
		
	}]);
	
	
</script>
<!-- ---查看新闻详情----- -->	
<script type="text/ng-template" id = 'news_datail.html'>
  
	<div class="am-cf am-padding am-padding-bottom-0">
		<div class="am-fl am-cf">
			<strong class="am-text-primary am-text-lg">新闻动态</strong><small>&nbsp;>>&nbsp;<a href="#/view_news">待发布</a>&nbsp;>>&nbsp;文章详情</small>
		</div>
	</div>

    <hr>
	<div style =" width: 750px; margin: auto;"class="am-tabs am-margin" data-am-tabs>
		<ul class="am-tabs-nav am-nav am-nav-tabs">

		</ul>

	
	<p align="center"><b>{{essay.title}}</b></p>
	<p><b>来源：</b>{{essay.source}}</p>
	<p><b>日期：</b>{{essay.date}}</p>
	<p><b>分类：</b>{{essay.sort}}</p>
	<hr>
	<div ng-bind-html="essay.content"></div> 
	
	</div> 
 
</script>

</body>
</html>
